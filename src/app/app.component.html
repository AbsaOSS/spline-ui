<!--
  ~ Copyright 2020 ABSA Group Limited
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<ng-container *ngIf="splineConfig$ | async as splineConfig">

    <spline-layout-common [isEmbeddedMode]="splineConfig.isEmbeddedMode"
                          [appVersion]="appVersion">


        <!-- HEADER -->
        <ng-template splineLayoutSection="header">
            <spline-attribute-search (attributeSelected$)="onAttributeSearchSelected($event.attributeInfo)"></spline-attribute-search>
        </ng-template>
        <!-- ./HEADER -->

        <!-- SIDEBAR -->
        <ng-template let-isExpanded="isExpanded" splineLayoutSection="sidebar">
            <div class="spline-sidebar-menu">

                <mat-nav-list>
                    <a [class.active]="isEventsLinkActive.isActive"
                       [matTooltipDisabled]="isExpanded"
                       [matTooltipPosition]="'right'"
                       mat-list-item
                       *ngIf="isEventsLinkActive$ | async as isEventsLinkActive"
                       matTooltip="Execution Events"
                       routerLink="/app/events/list">

                        <mat-icon>play_arrow</mat-icon>
                        <span *ngIf="isExpanded">Execution Events</span>

                    </a>
                    <a [matTooltipDisabled]="isExpanded"
                       [matTooltipPosition]="'right'"
                       mat-list-item
                       matTooltip="Execution Plans"
                       routerLink="/app/events/plans"
                       routerLinkActive="active">

                        <mat-icon>playlist_play</mat-icon>
                        <span *ngIf="isExpanded">Execution Plans</span>

                    </a>

                    <a [matTooltipDisabled]="isExpanded"
                       [matTooltipPosition]="'right'"
                       mat-list-item
                       matTooltip="Data Sources"
                       routerLink="/app/events/data-sources"
                       routerLinkActive="active">

                        <mat-icon>description</mat-icon>
                        <span *ngIf="isExpanded">Data Sources</span>

                    </a>
                </mat-nav-list>
            </div>
        </ng-template>
        <!-- ./SIDEBAR -->

        <!-- CONTENT -->
        <router-outlet></router-outlet>
        <!-- CONTENT -->

    </spline-layout-common>

</ng-container>
